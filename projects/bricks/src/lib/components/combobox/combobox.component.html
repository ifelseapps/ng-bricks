<div class="wrapper">
  <div
    class="b-combobox-label"
    [class.active] = "isVisiblePopup$ | async"
    tabindex="0"
    cdkOverlayOrigin
    #trigger="cdkOverlayOrigin"
    #label
  >
    {{((selectedItem$ | async)?.name) || 'Placeholder'}}
  </div>
</div>

<ng-template
  cdkConnectedOverlay
  cdkConnectedOverlayHasBackdrop
  cdkConnectedOverlayBackdropClass="b-combobox-backdrop"
  [cdkConnectedOverlayOrigin]="trigger"
  [cdkConnectedOverlayOpen]="isVisiblePopup$ | async"
>
  <div class="b-popup" cdkTrapFocus>
    <div>Overlay inner</div>
    <div>
      <input
        type="text"
        (keydown.arrowDown)="itemsList.next()"
        (keydown.arrowUp)="itemsList.prev()"
        (keydown.enter)="onSelect()"
      >
    </div>
    <b-items-list
      [items]="items"
      (changeActiveItem)="onChangeActiveItem($event)"
      (selectItem)="onSelect($event)"
      #itemsList
    ></b-items-list>
  </div>
</ng-template>
